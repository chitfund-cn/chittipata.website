<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chittipata - Savings Plans</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="plans.html" class="active">Plans</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </nav>
  <main>
    <section>
      <h1>Our Savings Plans</h1>
      <div class="plan-cards">
        <div class="plan-card" onclick="openForm('₹500 / Month')">
          <h2>₹500 / Month</h2>
          <p>Save ₹500 every month</p>
          <p>Get ₹5,000 after 11 months</p>
          <p>Get ₹10,000 after 22 months</p>
        </div>
        <div class="plan-card" onclick="openForm('₹1,000 / Month')">
          <h2>₹1,000 / Month</h2>
          <p>Save ₹1,000 every month</p>
          <p>Get ₹10,000 after 11 months</p>
          <p>Get ₹20,000 after 22 months</p>
        </div>
      </div>
      <div class="note">
        <b>Note:</b> If withdrawn before completing the selected tenure, only 40% of the listed return will be paid. Full returns as shown above are payable only after completing tenure.
      </div>
    </section>
  </main>

  <!-- Modal Popup Form -->
  <div id="planFormModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeForm()">&times;</span>
      <h2>Plan Registration</h2>
      <form id="planForm" autocomplete="off">
        <label for="planAmount">Plan Amount</label>
        <input type="text" id="planAmount" name="planAmount" readonly>

        <label for="fullName">Full Name</label>
        <input type="text" id="fullName" name="fullName" required>

        <label for="mobile">Mobile Number</label>
        <input type="tel" id="mobile" name="mobile" required pattern="[0-9]{10}" maxlength="10">

        <label for="email">Email ID</label>
        <input type="email" id="email" name="email" required>

        <label for="address">Address</label>
        <input type="text" id="address" name="address" required>

        <label for="tenure">Select Tenure</label>
        <select id="tenure" name="tenure" required>
          <option value="">Select</option>
          <option value="11">11 Months</option>
          <option value="22">22 Months</option>
        </select>

        <button type="submit">Submit</button>
      </form>
      <div id="paymentSection" style="display:none;text-align:center;">
        <h3>Proceed to Payment</h3>
        <p>Pay via any UPI app to <b>9059076269</b>.</p>
        <img src="https://api.qrserver.com/v1/create-qr-code/?data=upi://pay?pa=9059076269@upi&pn=Chittipata&am=AMOUNT&cu=INR" alt="UPI QR" width="180" style="margin:10px auto;">
        <p><b>After payment, click the button below:</b></p>
        <button onclick="paymentDone()">I have paid</button>
      </div>
      <div id="thankYouMsg" style="display:none;text-align:center;margin-top:18px;font-weight:600;color:#27ae60;">
        Thank you for registering! The payment receipt will be sent to your email.
      </div>
    </div>
  </div>

  <script>
    let formData = {};

    function openForm(planAmount) {
      document.getElementById('planAmount').value = planAmount;
      document.getElementById('planFormModal').style.display = 'block';
      document.getElementById('planForm').style.display = 'block';
      document.getElementById('paymentSection').style.display = 'none';
      document.getElementById('thankYouMsg').style.display = 'none';
    }

    function closeForm() {
      document.getElementById('planFormModal').style.display = 'none';
      document.getElementById('planForm').reset();
    }

    window.onclick = function(event) {
      const modal = document.getElementById('planFormModal');
      if (event.target == modal) {
        closeForm();
      }
    }

    document.getElementById('planForm').onsubmit = function(e) {
      e.preventDefault();
      // Save form data for payment receipt
      formData = {
        plan: document.getElementById('planAmount').value,
        fullName: document.getElementById('fullName').value,
        mobile: document.getElementById('mobile').value,
        email: document.getElementById('email').value,
        address: document.getElementById('address').value,
        tenure: document.getElementById('tenure').value
      };
      this.style.display = 'none';
      document.getElementById('paymentSection').style.display = 'block';
      // Optionally, set the QR code amount dynamically (for demo, fixed)
    }

    function paymentDone() {
      document.getElementById('paymentSection').style.display = 'none';
      document.getElementById('thankYouMsg').style.display = 'block';
      // Here you would call your backend to send the email receipt to user and manager
      // Example: sendPaymentReceipt(formData);
      setTimeout(() => {
        closeForm();
      }, 3000);
    }
  </script>
</body>
</html>
